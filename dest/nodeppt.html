<!doctype html><html><head><meta charset=UTF-8><title>Hello GraphQL - By shuxun</title><link rel=stylesheet href=//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.5.1/katex.min.css><link href=./css/chunk-vendors.51a2cca8.css rel=stylesheet></head><body><div><article id=webslides><section slide class="slide bg-black aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .anim"><span class="background anim" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><img src=./img/logo.638af725.svg class="size-20 alignleft"><h2 class="text-landing text-shadow">Hello GraphQL</h2><p class=text-intro>By shuxun.yin</p><p><a href=https://github.com/yinshuxun/graphql-microservice-practice class="button ghost" target=_blank><i class="fa fa-github"></i> Github</a></p></div></section><section slide class="slide bg-black-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><div class=content-left><h2>什么是 GraphQL</h2></div><div class="content-left text-content" style=font-size:25px><p>GraphQL 全称叫 &quot;Graph Query Language&quot;，官方解释是 “GraphQL 既是一种用于 API 的查询语言也是一个满足你数据查询的运行时。” 通俗理解一下就是，GraphQL 是一门查询语言，更精确的说 API 查询语言。它能显示服务器提供的不同类型的数据，客户端根据这些数据可以准确地选择它想要的内容。</p></div></div></section><section slide class="slide bg-black-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><div class=content-left><h2>GraphQL 特性</h2></div><div class=content-left><ul><li><a href=https://graphql.cn/learn/schema/#type-system target=_blank>定义 Schema，来描述接口获取数据的逻辑</a></li><li><a href=https://graphql.cn/learn/schema/#the-query-and-mutation-types target=_blank>查询和变更类型（The Query and Mutation Types）</a></li><li><a href=https://graphql.cn/learn/schema/#type-system target=_blank>它定义了一套类型系统(Type System)，进行数据模型的抽象</a></li><li>....</li></ul></div></div></section><section slide class="slide bg-black-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><div class=content-left><h3>GraphQL 的延伸，graphical &amp; graph(s)</h3></div><div class=content-left><ul><li><a href=https://github.com/apollographql/apollo-client target=_blank>apollo-client</a>:: A fully-featured, production ready caching GraphQL client for every UI framework and GraphQL server，提供了每个UI框架和GraphQL服务器的功能齐全的 GraphQL客户端</li><li><a href=https://github.com/graphql/graphiql target=_blank>graphiql</a>:: 一款运行于浏览器的GraphQL IDE，几乎所有的服务端库都会提供这么一个经典的web页面。该页面是一个单页面应用，可以直接在其上运行查询语句，自带代码补全和校错功能，直接查看GraphQL所有的文档(定义好的Schema)</li><li><a href=https://apis.guru/graphql-voyager/ target=_blank>graphql-voyager</a>:: Represent any GraphQL API as an interactive graph. It's time to finally see the graph behind GraphQL! 用交互式的Schema 图表展示任意的 GraphQL API，总算能看见 GraphQL背后的 graph 了! （在 Github API 4.0 开放出的 GraphQL API，它将 Github 所有的对外类型都暴露出来了，提供给开发者开发插件的）</li><li><a href=https://github.com/Ghirro/graphql-network target=_blank>Graphql-Network</a>:: Chrome的调试工具，由于GraphQL查询语句是一串字符串，浏览器审查元素看起来非常难看，这个工具则可以将其格式化成我们想要的格式。</li><li><a href=https://github.com/2fd/graphdoc target=_blank>GraphDoc</a>:: 可以将文档页面生成静态文档站点。</li></ul></div></div></section><section slide class="slide bg-white-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h1>GrqphQL 相比 REST 有什么优势</h1><hr><ul><li class="animated fadeInUp" style=font-size:30px>单一入口</li><li class="animated fadeInUp delay-400" style=font-size:30px>便捷文档</li><li class="animated fadeInUp delay-800" style=font-size:30px>避免数据冗余</li><li class="animated fadeInUp delay-1200" style=font-size:30px>数据聚合</li></ul></div></section><section slide class="slide bg-white-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h2><strong>1、单一入口</strong></h2><hr><img src=./img/p2.1b137963.png class=size-60></div></section><section slide class="slide bg-white-blue" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h2><strong>2、便捷文档</strong></h2><ul class=flexblock><li><img src=./img/swagger.a11e3e2b.png alt=""></li><li><img src=./img/rap.450c4fad.png alt=""></li><li><img src=./img/show_doc.8379bc67.png alt=""></li></ul><ul><li class="animated fadeInUp" style=font-size:30px>学习成本</li><li class="animated fadeInUp delay-400" style=font-size:30px>操作复杂</li><li class="animated fadeInUp delay-800" style=font-size:30px>API 修改和文档难以同步</li></ul></div></section><section slide class="slide bg-white-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h3><strong>3、数据冗余</strong></h3><div class="vertical-align grid"><div class=column><h3>REST</h3><pre class=language-json><code class=language-json>  <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第一篇博客"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"阿大沙发斯蒂芬三大发送的发的所发生的盛大发售的发生的发送到发送到范德萨发撒第三方sad"</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第二篇博客"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"爱的色放撒旦法发的撒发大水发的撒范德萨发大水发的萨芬沙发发大发发发发的发发艾弗森的"</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"前端博客说明g"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"阿盛大发售的发生发的说法是"</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">3</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"前端博客说明01222"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"的发打发是打发斯蒂芬萨达"</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">2</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"知识知识未来的一部分"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"阿斯顿发送到发多少发撒旦法师打发第三方的萨芬"</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
</code></pre></div><div class=column style=font-size:50px><p>=&gt;</p></div><div class=column><h3>GraphQL</h3><pre class=language-json><code class=language-json><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第一篇博客"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第二篇博客"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"前端博客说明g"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"前端博客说明01222"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"知识知识未来的一部分"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
</code></pre></div></div></div></section><section slide class="slide bg-white-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h3><strong>4、数据聚合</strong></h3><div class="vertical-align grid"><div class=column><h3>用户列表</h3><pre class=language-json><code class=language-json>  <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"user01"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"tuoni"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"绿箭侠"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ....
  <span class="token punctuation">]</span>
</code></pre></div><div class=column style=font-size:50px><span>+<span></span></span></div><div class=column><h3>博客列表</h3><pre class=language-json><code class=language-json> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第一篇博客"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第二篇博客"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"前端博客说明g"</span><span class="token punctuation">,</span>
        <span class="token property">"blog_id"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token number">3</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      ....
    <span class="token punctuation">]</span>
</code></pre></div></div></div></section><section slide class="slide bg-white-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h3>聚合列表</h3><pre class=language-json><code class=language-json> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"user01"</span><span class="token punctuation">,</span>
        <span class="token property">"blogs"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第一篇博客"</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"第二篇博客"</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"知识知识未来的一部分"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"user_id"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"tuoni"</span><span class="token punctuation">,</span>
        <span class="token property">"blogs"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"前端博客说明01222"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
      ....
    <span class="token punctuation">]</span>
</code></pre></div></section><section slide class="slide bg-white-blue aligncenter" image="https://source.unsplash.com/n9WPPWiPPJw/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/n9WPPWiPPJw/')"></span><div class=wrap wrap=true><h2>GraphQL存在的问题</h2><p>graphQl也不是没有缺点，主要有以下几个缺点：</p><ul><li><p>改造成本 要使用GraphQL对数据源进行管理，我们需要对整个后端模型用Graphql类型系统来描述，同时需要改造服务端暴露数据的方式，这无疑成本是巨大的。<a href=https://github.com/yarax/swagger-to-graphql target=_blank>swagger to graphql</a></p></li><li><p>查询性能 GraphQL 相比于传统的后端服务更容易出现N + 1的问题，尤其是当资源需要通过 RPC 请求从其他微服务中获取时，问题就有些复杂了，并不能通过简单的改变 SQL 查询的方式来解决。这里GraphQL 使用了 DataLoader 从业务层面解决了 N + 1 问题，其核心逻辑就是整合多个请求，通过批量请求的方式解决问题。</p></li><li><p>...当然还会在实践过程中遇到其他问题，需要共同去探索</p></li></ul></div></section><section slide class=slide image=https://source.unsplash.com/UJbHNoVPZW0/ ><span class=background style="background-image:url('https://source.unsplash.com/UJbHNoVPZW0/')"></span><div class=wrap wrap=true><p class=aligncenter style=font-size:80px>OVER</p></div></section></article></div><script src=//cdn.staticfile.org/echarts/4.1.0-release/echarts.min.js></script><script src=//cdn.staticfile.org/mermaid/8.0.0/mermaid.min.js></script><script>mermaid.startOnLoad = false;</script><script>window.pluginsOptions = {"echarts":{"theme":"infographic"},"mermaid":{"theme":"forest"}}



document.addEventListener('DOMContentLoaded', () => {
    let isPrintMode = false;
    if(~location.search.indexOf('print-pdf')){
        isPrintMode = true;
        WebSlides.registerPlugin('scroll', function(){});
    }
    const ws = new WebSlides({
        loop: false
    })
    window.wsInstance = ws;
    if(isPrintMode){
        ws.slides.forEach(s=>s.show())
    }
}, false)</script><script src=./js/chunk-vendors.0485f17a.js></script><script src=./js/nodeppt.2148c744.js></script></body></html>